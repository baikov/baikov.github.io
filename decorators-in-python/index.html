<!doctype html><html lang=ru><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="index, follow"><title class=pjax-title>Декораторы в Python: определение, особенности, примеры декораторов</title><meta name=Description content="Декораторы позволяют менять поведение функции не изменяя ее кода. Это становится возможным благодаря тому, что функции в Python могут принимать и возвращать функции. Декоратор в Python - это реализация структурного шаблона проектирования «Декоратор»."><meta property="og:title" content="Декораторы в Python: определение, особенности, примеры декораторов"><meta property="og:description" content="Декораторы позволяют менять поведение функции не изменяя ее кода. Это становится возможным благодаря тому, что функции в Python могут принимать и возвращать функции. Декоратор в Python - это реализация структурного шаблона проектирования «Декоратор»."><meta property="og:type" content="article"><meta property="og:url" content="https://baikov.dev/decorators-in-python/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-04-05T00:00:00+00:00"><meta property="article:modified_time" content="2022-05-05T11:11:45+00:00"><meta property="og:site_name" content="baikov.dev"><meta name=twitter:card content="summary"><meta name=twitter:title content="Декораторы в Python: определение, особенности, примеры декораторов"><meta name=twitter:description content="Декораторы позволяют менять поведение функции не изменяя ее кода. Это становится возможным благодаря тому, что функции в Python могут принимать и возвращать функции. Декоратор в Python - это реализация структурного шаблона проектирования «Декоратор»."><meta name=application-name content="baikov.dev"><meta name=apple-mobile-web-app-title content="baikov.dev"><meta name=theme-color content="#f8f8f8"><meta name=msapplication-TileColor content="#ffffff"><link rel=icon href=/favicon.svg><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#e31e25><link rel=canonical href=https://baikov.dev/decorators-in-python/><link rel=prev href=https://baikov.dev/coroutines-in-python/><link rel=next href=https://baikov.dev/yandex-praktikum-reviewer-test-task/><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/fontawesome-free/all.min.css><noscript><link rel=stylesheet href=/lib/fontawesome-free/all.min.css></noscript><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/animate/animate.min.css><noscript><link rel=stylesheet href=/lib/animate/animate.min.css></noscript><meta name=google-site-verification content="7PfgOufFiirb5fKc1Uc8iRsP2vqxwhsv6wkLbbQAbGo"><meta name=yandex-verification content="67a921f283ab1e01"><script>(function(t,s,o,e,a){t[e]=t[e]||[],t[e].push({'gtm.start':(new Date).getTime(),event:"gtm.js"});var i=s.getElementsByTagName(o)[0],n=s.createElement(o),r=e!="dataLayer"?"&l="+e:'';n.async=!0,n.src="https://www.googletagmanager.com/gtm.js?id="+a+r,i.parentNode.insertBefore(n,i)})(window,document,"script","dataLayer","GTM-T78LHF7")</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Декораторы в Python: определение, особенности, примеры декораторов","inLanguage":"ru","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/baikov.dev\/decorators-in-python\/"},"genre":"posts","keywords":"python","wordcount":1524,"url":"https:\/\/baikov.dev\/decorators-in-python\/","datePublished":"2022-04-05T00:00:00+00:00","dateModified":"2022-05-05T11:11:45+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Baikov"},"description":"Декораторы позволяют менять поведение функции не изменяя ее кода. Это становится возможным благодаря тому, что функции в Python могут принимать и возвращать функции. Декоратор в Python - это реализация структурного шаблона проектирования «Декоратор»."}</script></head><body header-desktop=fixed header-mobile=auto><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T78LHF7" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><script type=text/javascript>function setTheme(e){document.body.setAttribute("theme",e),document.documentElement.style.setProperty("color-scheme",e==="light"?"light":"dark")}function saveTheme(e){window.localStorage&&localStorage.setItem("theme",e)}function getMeta(t){const e=document.getElementsByTagName("meta");for(let n=0;n<e.length;n++)if(e[n].getAttribute("name")===t)return e[n];return''}if(window.localStorage&&localStorage.getItem("theme")){let e=localStorage.getItem("theme");e==="light"||e==="dark"||e==="black"?setTheme(e):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?setTheme("dark"):setTheme("light")}else"auto"==="light"||"auto"==="dark"||"auto"==="black"?(setTheme("auto"),saveTheme("auto")):(saveTheme("auto"),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?setTheme("dark"):setTheme("light"));let metaColors={light:"#f8f8f8",dark:"#252627",black:"#000000"};getMeta("theme-color").content=metaColors[document.body.getAttribute("theme")]</script><div id=back-to-top></div><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=baikov.dev><span class=header-title-pre><i class="fas fa-laptop-code"></i></span>baikov<span class=header-title-post>.dev</span></a></div><div class=menu><div class=menu-inner><a class=menu-item href=/about/>Обо мне </a><a class=menu-item href=/posts/>Блог </a><a class=menu-item href=/categories/>Категории </a><a class=menu-item href=/cv/>Резюме </a><span class="menu-item delimiter"></span><a href=# onclick=return!1 class="menu-item language" title="Выбор Языка">Русский<i class="fas fa-chevron-right fa-fw"></i>
<select class=language-select title="Select Language" id=language-select-desktop onchange="location=this.value"><option value=/decorators-in-python/ selected>Русский</option></select>
</a><span class="menu-item search" id=search-desktop><input type=text placeholder="Поиск заголовков или содержимого..." id=search-input-desktop>
<a href=# onclick=return!1 class="search-button search-toggle" id=search-toggle-desktop title=Поиск><i class="fas fa-search fa-fw"></i></a>
<a href=# onclick=return!1 class="search-button search-clear" id=search-clear-desktop title=Очистить><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin"></i></span>
</span><a href=# onclick=return!1 class="menu-item theme-switch" title="Сменить Тему"><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=baikov.dev><span class=header-title-pre><i class="fas fa-laptop-code"></i></span>baikov<span class=header-title-post>.dev</span></a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Поиск заголовков или содержимого..." id=search-input-mobile>
<a href=# onclick=return!1 class="search-button search-toggle" id=search-toggle-mobile title=Поиск><i class="fas fa-search fa-fw"></i></a>
<a href=# onclick=return!1 class="search-button search-clear" id=search-clear-mobile title=Очистить><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin"></i></span></div><a href=# onclick=return!1 class=search-cancel id=search-cancel-mobile>Отменить</a></div><a class=menu-item href=/about/ title>Обо мне</a><a class=menu-item href=/posts/ title>Блог</a><a class=menu-item href=/categories/ title>Категории</a><a class=menu-item href=/cv/ title>Резюме</a><a href=# onclick=return!1 class="menu-item theme-switch" title="Сменить Тему">
<i class="fas fa-adjust fa-fw"></i>
</a><a href=# onclick=return!1 class=menu-item title="Выбор Языка">Русский<i class="fas fa-chevron-right fa-fw"></i>
<select class=language-select title="Select Language" onchange="location=this.value"><option value=/decorators-in-python/ selected>Русский</option></select></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><p class=toc-title>Содержание</p><div class=toc-content id=toc-content-auto><nav id=TableOfContents><ul><li><a href=#паттерн-проектирования-декоратор>Паттерн проектирования &ldquo;Декоратор&rdquo;</a></li><li><a href=#декораторы-в-python>Декораторы в Python</a></li><li><a href=#функция-с-аргументами>Функция с аргументами</a></li><li><a href=#functoolswraps>functools.wraps</a></li><li><a href=#декораторы-с-аргументами>Декораторы с аргументами</a></li><li><a href=#объекты-декораторы>Объекты-декораторы</a></li><li><a href=#декоратор-метода>Декоратор метода</a></li><li><a href=#декоратор-класса-на-примере-singleton>Декоратор класса на примере Singleton</a></li><li><a href=#встроенные-декораторы>Встроенные декораторы</a></li><li><a href=#примеры-декораторов-код>Примеры декораторов (код)</a><ul><li><a href=#конвертер>Конвертер</a></li><li><a href=#таймер>Таймер</a></li><li><a href=#счетчик-вызовов>Счетчик вызовов</a></li></ul></li></ul></nav></div></div><script>document.getElementsByTagName("main")[0].setAttribute("pageStyle","normal")</script><script>document.getElementsByTagName("main")[0].setAttribute("autoTOC","true")</script><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Декораторы в Python</h1><div class=post-meta><div class=post-meta-line>&nbsp;<span class=post-category>Размещено в</span>&nbsp;<span class=post-category>категории <a href=/categories/python-interview/><i class="far fa-folder fa-fw"></i>Python собеседование</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=05.04.2022>05.04.2022</time>&nbsp;<i class="far fa-edit fa-fw"></i>&nbsp;<time datetime=05.05.2022>05.05.2022</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;1524 слов&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;8 минут&nbsp;</div></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>Содержание</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#паттерн-проектирования-декоратор>Паттерн проектирования &ldquo;Декоратор&rdquo;</a></li><li><a href=#декораторы-в-python>Декораторы в Python</a></li><li><a href=#функция-с-аргументами>Функция с аргументами</a></li><li><a href=#functoolswraps>functools.wraps</a></li><li><a href=#декораторы-с-аргументами>Декораторы с аргументами</a></li><li><a href=#объекты-декораторы>Объекты-декораторы</a></li><li><a href=#декоратор-метода>Декоратор метода</a></li><li><a href=#декоратор-класса-на-примере-singleton>Декоратор класса на примере Singleton</a></li><li><a href=#встроенные-декораторы>Встроенные декораторы</a></li><li><a href=#примеры-декораторов-код>Примеры декораторов (код)</a><ul><li><a href=#конвертер>Конвертер</a></li><li><a href=#таймер>Таймер</a></li><li><a href=#счетчик-вызовов>Счетчик вызовов</a></li></ul></li></ul></nav></div></div><div class=content id=content><p><a href=/python-interview-questions/ rel>Список вопросов к Python собеседованию</a></p><h2 id=паттерн-проектирования-декоратор class=headerLink><a href=#%d0%bf%d0%b0%d1%82%d1%82%d0%b5%d1%80%d0%bd-%d0%bf%d1%80%d0%be%d0%b5%d0%ba%d1%82%d0%b8%d1%80%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d1%8f-%d0%b4%d0%b5%d0%ba%d0%be%d1%80%d0%b0%d1%82%d0%be%d1%80 class=header-mark></a>Паттерн проектирования &ldquo;Декоратор&rdquo;</h2><blockquote><p>Декоратор (Decorator) — структурный шаблон проектирования, предназначенный для динамического подключения дополнительного поведения к объекту. Шаблон Декоратор предоставляет гибкую альтернативу практике создания подклассов с целью расширения функциональности.<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></p></blockquote><h2 id=декораторы-в-python class=headerLink><a href=#%d0%b4%d0%b5%d0%ba%d0%be%d1%80%d0%b0%d1%82%d0%be%d1%80%d1%8b-%d0%b2-python class=header-mark></a>Декораторы в Python</h2><p>Декоратор — это функция, которая позволяет обернуть другую функцию для расширения её функциональности без непосредственного изменения её кода. <img class="lazyload version" data-src=/svg/version/Python%202.4-new.ru.min.svg data-srcset="/svg/version/Python%202.4-new.ru.min.svg, /svg/version/Python%202.4-new.ru.min.svg 1.5x, /svg/version/Python%202.4-new.ru.min.svg 2x" data-sizes=auto alt="Python 2.4" title="Python 2.4"></p><p>Чтобы лучше пониманять работу декораторов нужно помнить тот факт, что:</p><ul><li>в Python <strong>всё является объектами</strong>;</li><li>Функции — это <strong>объекты первого класса</strong>;</li><li>следовательно, язык поддерживает <strong>функции высших порядков</strong>.</li></ul><blockquote><p>Объектами первого класса в контексте конкретного языка программирования называются элементы, с которыми можно делать всё то же, что и с любым другим объектом: передавать как параметр, возвращать из функции и присваивать переменной.</p></blockquote><blockquote><p>Функции высших порядков — это такие функции, которые могут принимать в качестве аргументов и возвращать другие функции.</p></blockquote><p>Это означает, что мы можем:</p><ul><li>сохранять функции в переменные;</li><li>передавать их в качестве аргументов;</li><li>возвращать из других функций;</li><li>определить одну функцию внутри другой (вложенные функции).</li></ul><p>По сути, это и позволяет реализовать декоратор:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>decorator</span><span class=p>(</span><span class=n>func</span><span class=p>):</span>
</span></span><span class=line><span class=cl>  <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Inside decorator&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=k>def</span> <span class=nf>wrapper</span><span class=p>():</span>  <span class=c1># вложенная функция (обертка)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Inside wrapper - Befor func exec&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>res</span> <span class=o>=</span> <span class=n>func</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Inside wrapper - After func exec&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>res</span>
</span></span><span class=line><span class=cl>  <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Inside decorator 2&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=n>wrapper</span>  <span class=c1># возвращаем функцию (не вызывая)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>outer_func</span><span class=p>():</span>
</span></span><span class=line><span class=cl>  <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Inside outer_func&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Передаем функцию как параметр, результат присваиваем переменной</span>
</span></span><span class=line><span class=cl><span class=n>wrapped_func</span> <span class=o>=</span> <span class=n>decorator</span><span class=p>(</span><span class=n>outer_func</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># вызываем обернутую функцию первый раз</span>
</span></span><span class=line><span class=cl><span class=n>wrapped_func</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=c1># вызываем обернутую функцию второй раз</span>
</span></span><span class=line><span class=cl><span class=n>wrapped_func</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><p>Результат запуска:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># первый вызов функции wrapped_func()</span>
</span></span><span class=line><span class=cl>Inside decorator - Befor wrapper def
</span></span><span class=line><span class=cl>Inside decorator - After wrapper def
</span></span><span class=line><span class=cl>Inside wrapper - Befor func <span class=nb>exec</span>
</span></span><span class=line><span class=cl>Inside outer_func
</span></span><span class=line><span class=cl>Inside wrapper - After func <span class=nb>exec</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Второй вызов функции wrapped_func()</span>
</span></span><span class=line><span class=cl>Inside wrapper - Befor func <span class=nb>exec</span>
</span></span><span class=line><span class=cl>Inside outer_func
</span></span><span class=line><span class=cl>Inside wrapper - After func <span class=nb>exec</span>
</span></span></code></pre></td></tr></table></div></div><p>Выражение <code>@decorator</code> - это синтаксический сахар, короткая запись для <code>outer_func = decorator(outer_func)</code>.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>decorator</span><span class=p>(</span><span class=n>func</span><span class=p>):</span>
</span></span><span class=line><span class=cl>  <span class=k>def</span> <span class=nf>wrapper</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>func</span><span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=n>wrapper</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@decorator</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>outer_func</span><span class=p>():</span>
</span></span><span class=line><span class=cl>  <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>outer_func</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>Еще немного о декораторах:</strong></p><ul><li>декораторы можно вкладывать друг в друга (при этом порядок декорирования важен);</li><li>декораторы можно использовать с другими методами (например, «магическими»);</li><li>декораторы могут принимать в качестве аргументов не только функции.</li></ul><p><strong>Условные недостатки декораторов:</strong></p><ul><li>несколько замедляют вызов функции</li><li>если функция декорирована — это не отменить (существуют трюки, позволяющие создать декоратор, который можно отсоединить от функции, но это плохая практика)</li><li>оборачивают функции, что может затруднить отладку (лечится использованием <code>functools.wraps</code>).</li></ul><p><strong>Области применения декораторов:</strong></p><ul><li>когда нужно избежать повторений при использовании похожих методов;</li><li>могут быть использованы для расширения возможностей функций из сторонних библиотек (код которых мы не можем изменять);</li><li>в Django декораторы используются для управления кешированием, контроля за правами доступа и определения обработчиков адресов;</li><li>в Twisted — для создания поддельных асинхронных inline-вызовов.</li></ul><h2 id=функция-с-аргументами class=headerLink><a href=#%d1%84%d1%83%d0%bd%d0%ba%d1%86%d0%b8%d1%8f-%d1%81-%d0%b0%d1%80%d0%b3%d1%83%d0%bc%d0%b5%d0%bd%d1%82%d0%b0%d0%bc%d0%b8 class=header-mark></a>Функция с аргументами</h2><p>Допустим, теперь декорируемая функция <code>outer_func()</code> может принимать произвольное количество аргументов.</p><p>Чтобы наш декоратор работал корректно необходимо использовать <code>*args</code> и <code>**kwargs</code> (распаковка аргументов) во внутренней функции <code>wrapper()</code>, а так же передавать произвольное число позиционных и ключевых аргументов функции <code>func()</code>, которую декоратор получает в качестве аргумента:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>decorator</span><span class=p>(</span><span class=n>func</span><span class=p>):</span>
</span></span><span class=line><span class=cl>  <span class=k>def</span> <span class=nf>wrapper</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>res</span> <span class=o>=</span> <span class=n>func</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>res</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=n>wrapper</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@decorator</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>outer_func</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>  <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>outer_func</span><span class=p>(</span><span class=mi>7</span><span class=p>,</span> <span class=mi>8</span><span class=p>,</span> <span class=n>name</span><span class=o>=</span><span class=s2>&#34;Tom&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>Теперь декоратор <code>@decorator</code> будет работать как для функций, которые вообще не принимают аргументы, так и для функций которые принимают произвольное количество аргументов.</p><h2 id=functoolswraps class=headerLink><a href=#functoolswraps class=header-mark></a>functools.wraps</h2><p>Из-за того, что декоратор возвращает не первоначальную функцию, а функцию обертку <code>wrapper</code> - теряется строка документации (docstring) основной функции, доступ к которой можно получить с помощью метода <code>__doc__</code>.</p><p><code>functools.wraps</code> — декоратор <img class="lazyload version" data-src=/svg/version/Python%202.5-new.ru.min.svg data-srcset="/svg/version/Python%202.5-new.ru.min.svg, /svg/version/Python%202.5-new.ru.min.svg 1.5x, /svg/version/Python%202.5-new.ru.min.svg 2x" data-sizes=auto alt="Python 2.5" title="Python 2.5"></p><p>Функция <code>wraps</code> из модуля <code>functools</code> копирует всю информацию об оборачиваемой функции (имя, модуля, docstrings и т.п.) в функцию-обёртку.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>functools</span> <span class=kn>import</span> <span class=n>wraps</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>decorator</span><span class=p>(</span><span class=n>func</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;&#39;&#39;Декоратор&#39;&#39;&#39;</span>
</span></span><span class=line><span class=cl>    <span class=nd>@wraps</span><span class=p>(</span><span class=n>func</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>wrapper</span><span class=p>():</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;&#39;&#39;Функция wrapper&#39;&#39;&#39;</span>
</span></span><span class=line><span class=cl>        <span class=n>func</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>wrapper</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@decorator</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>outer_func</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;&#39;&#39;Оборачиваемая функция&#39;&#39;&#39;</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;функция wrapped&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>outer_func</span><span class=o>.</span><span class=vm>__name__</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>outer_func</span><span class=o>.</span><span class=vm>__doc__</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=декораторы-с-аргументами class=headerLink><a href=#%d0%b4%d0%b5%d0%ba%d0%be%d1%80%d0%b0%d1%82%d0%be%d1%80%d1%8b-%d1%81-%d0%b0%d1%80%d0%b3%d1%83%d0%bc%d0%b5%d0%bd%d1%82%d0%b0%d0%bc%d0%b8 class=header-mark></a>Декораторы с аргументами</h2><p>Чтобы передать параметр в сам декоратор нужно добавить еще один слой абстракции, то есть — еще одну функцию-обертку.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>functools</span> <span class=kn>import</span> <span class=n>wraps</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>benchmark</span><span class=p>(</span><span class=nb>type</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&#34;sec&#34;</span><span class=p>,</span> <span class=n>iters</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>1</span><span class=p>):</span>  <span class=c1># новый уровень абстракции</span>
</span></span><span class=line><span class=cl>  <span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>def</span> <span class=nf>decorator</span><span class=p>(</span><span class=n>func</span><span class=p>):</span>  <span class=c1># сам декоратор</span>
</span></span><span class=line><span class=cl>    <span class=nd>@wraps</span><span class=p>(</span><span class=n>func</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>wrapper</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>  <span class=c1># функция обертка</span>
</span></span><span class=line><span class=cl>      <span class=n>start_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>      <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>iters</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>result</span> <span class=o>=</span> <span class=n>func</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=n>end_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>      <span class=n>exec_time</span> <span class=o>=</span> <span class=n>end_time</span> <span class=o>-</span> <span class=n>start_time</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=nb>type</span> <span class=o>==</span> <span class=s2>&#34;ms&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Exec time of </span><span class=si>{</span><span class=n>func</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2> x</span><span class=si>{</span><span class=n>iters</span><span class=si>}</span><span class=s2> is </span><span class=si>{</span><span class=n>exec_time</span><span class=o>*</span><span class=mi>1000</span><span class=si>}</span><span class=s2> ms&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Exec time of </span><span class=si>{</span><span class=n>func</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2> x</span><span class=si>{</span><span class=n>iters</span><span class=si>}</span><span class=s2> is </span><span class=si>{</span><span class=n>exec_time</span><span class=si>}</span><span class=s2> s&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=n>result</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>wrapper</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=n>decorator</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@benchmark</span><span class=p>(</span><span class=nb>type</span><span class=o>=</span><span class=s2>&#34;ms&#34;</span><span class=p>,</span> <span class=n>iters</span><span class=o>=</span><span class=mi>100</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>outer_func</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;&#34;&#34;Outer_func docstring&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;функция wrapped&#39;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>Функция <code>benchmark()</code> не является декоратором. Это обычная функция, которая принимает аргументы <code>type</code> и <code>iters</code>, а затем <strong>возвращает декоратор</strong>. В свою очередь, он декорирует функцию <code>outer_func()</code>. Поэтому мы использовали не выражение <code>@benchmark</code>, а <code>@benchmark(type="ms", iters=100)</code> — круглые скобки означают, что функция вызывается, после чего возвращает сам декоратор.</p><h2 id=объекты-декораторы class=headerLink><a href=#%d0%be%d0%b1%d1%8a%d0%b5%d0%ba%d1%82%d1%8b-%d0%b4%d0%b5%d0%ba%d0%be%d1%80%d0%b0%d1%82%d0%be%d1%80%d1%8b class=header-mark></a>Объекты-декораторы</h2><p>Декоратором могут быть не только функции, но и любые вызываемые объекты. Экземпляры класса с методом <code>__call__</code> тоже можно вызывать, поэтому классы можно использовать в качестве декораторов.</p><p>Для функций с параметрами <code>*args</code> и <code>**kwargs</code> нужно передать в метод <code>__call__</code>.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>Decorator</span><span class=p>:</span>
</span></span><span class=line><span class=cl>  <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>func</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Класс Decorator метод __init__&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=bp>self</span><span class=o>.</span><span class=n>func</span> <span class=o>=</span> <span class=n>func</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>def</span> <span class=fm>__call__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;перед вызовом класса...&#39;</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>func</span><span class=o>.</span><span class=vm>__name__</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=bp>self</span><span class=o>.</span><span class=n>func</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;после вызова класса&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@Decorator</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>outer_func</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>  <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;функция wrapped&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>outer_func</span><span class=p>(</span><span class=mi>7</span><span class=p>,</span> <span class=mi>8</span><span class=p>,</span> <span class=s2>&#34;Bob&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>Для передачи аргументов в класс-декоратор эти аргументы получает инициализатор <code>__init__</code>. Метод <code>__call__</code> будет получать декорируемую функцию и возвращать функцию-обертку, которая, по сути, будет выполнять эту декорируемую функцию. Функция-обертка <code>wrapper</code> получает <code>*args</code> и <code>**kwargs</code>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>functools</span> <span class=kn>import</span> <span class=n>wraps</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Decorator</span><span class=p>:</span>
</span></span><span class=line><span class=cl>  <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>output</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&#34;log&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Класс Decorator метод __init__&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=bp>self</span><span class=o>.</span><span class=n>output</span> <span class=o>=</span> <span class=n>output</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>def</span> <span class=fm>__call__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>func</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Класс Decorator метод __call__&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@wraps</span><span class=p>(</span><span class=n>func</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>wrapper</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>      <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;перед вызовом func...&#39;</span><span class=p>,</span> <span class=n>func</span><span class=o>.</span><span class=vm>__name__</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=n>result</span> <span class=o>=</span> <span class=n>func</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>output</span> <span class=o>==</span> <span class=s2>&#34;file&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Save to file&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Console output&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;после вызова func&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=n>result</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>wrapper</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@Decorator</span><span class=p>(</span><span class=n>output</span><span class=o>=</span><span class=s2>&#34;file&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>outer_func</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;&#34;&#34;Outer_func docstring&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;функция wrapped&#39;</span><span class=p>,</span> <span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=n>name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>outer_func</span><span class=p>(</span><span class=mi>7</span><span class=p>,</span> <span class=mi>8</span><span class=p>,</span> <span class=s2>&#34;Bob&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=декоратор-метода class=headerLink><a href=#%d0%b4%d0%b5%d0%ba%d0%be%d1%80%d0%b0%d1%82%d0%be%d1%80-%d0%bc%d0%b5%d1%82%d0%be%d0%b4%d0%b0 class=header-mark></a>Декоратор метода</h2><p>Функции и методы в Python — это практически одно и то же. Отличие в том, что методы всегда принимают первым параметром <code>self</code> (ссылку на объект). Следовательно, мы легко можем написать декоратор для метода:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>method_decorator</span><span class=p>(</span><span class=n>method</span><span class=p>):</span>
</span></span><span class=line><span class=cl>  <span class=k>def</span> <span class=nf>wrapper</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>result</span> <span class=o>=</span> <span class=n>method</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>result</span><span class=o>.</span><span class=n>upper</span><span class=p>()</span> <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>power</span> <span class=o>&gt;</span> <span class=mi>150</span> <span class=k>else</span> <span class=n>result</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=n>wrapper</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Car</span><span class=p>:</span>
</span></span><span class=line><span class=cl>  <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>power</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=bp>self</span><span class=o>.</span><span class=n>power</span> <span class=o>=</span> <span class=n>power</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nd>@method_decorator</span>
</span></span><span class=line><span class=cl>  <span class=k>def</span> <span class=nf>wroom_wroom</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=s2>&#34;wroom-wroom...&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>lada</span> <span class=o>=</span> <span class=n>Car</span><span class=p>(</span><span class=mi>87</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>bmw</span> <span class=o>=</span> <span class=n>Car</span><span class=p>(</span><span class=mi>300</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>lada</span><span class=o>.</span><span class=n>wroom_wroom</span><span class=p>())</span>  <span class=c1># wroom-wroom...</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>bmw</span><span class=o>.</span><span class=n>wroom_wroom</span><span class=p>())</span>  <span class=c1># WROOM-WROOM...</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=декоратор-класса-на-примере-singleton class=headerLink><a href=#%d0%b4%d0%b5%d0%ba%d0%be%d1%80%d0%b0%d1%82%d0%be%d1%80-%d0%ba%d0%bb%d0%b0%d1%81%d1%81%d0%b0-%d0%bd%d0%b0-%d0%bf%d1%80%d0%b8%d0%bc%d0%b5%d1%80%d0%b5-singleton class=header-mark></a>Декоратор класса на примере Singleton</h2><p>Декоратор можно использовать для декорирования класса. Отличие лишь в том, что декоратор получает класс, а не функцию.</p><p><strong>Singleton</strong> — это класс с одним экземпляром. Его можно сохранить как атрибут функции-обертки и вернуть при запросе.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>singleton</span><span class=p>(</span><span class=bp>cls</span><span class=p>):</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;&#39;&#39;Класс Singleton (один экземпляр)&#39;&#39;&#39;</span>
</span></span><span class=line><span class=cl>  <span class=k>def</span> <span class=nf>wrapper</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=ow>not</span> <span class=n>wrapper</span><span class=o>.</span><span class=n>instance</span><span class=p>:</span>
</span></span><span class=line><span class=cl>      <span class=n>wrapper</span><span class=o>.</span><span class=n>instance</span> <span class=o>=</span> <span class=bp>cls</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>wrapper</span><span class=o>.</span><span class=n>instance</span>
</span></span><span class=line><span class=cl>  <span class=n>wrapper</span><span class=o>.</span><span class=n>instance</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=n>wrapper</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@singleton</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>SomeClass</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>pass</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=встроенные-декораторы class=headerLink><a href=#%d0%b2%d1%81%d1%82%d1%80%d0%be%d0%b5%d0%bd%d0%bd%d1%8b%d0%b5-%d0%b4%d0%b5%d0%ba%d0%be%d1%80%d0%b0%d1%82%d0%be%d1%80%d1%8b class=header-mark></a>Встроенные декораторы</h2><ul><li><code>@classmethod</code></li><li><code>@staticmethod</code></li><li><code>@property</code></li></ul><p>Подробнее в статье <a href=/python-oop/ rel>ООП в Python</a>.</p><ul><li><code>@contextlib.contextmanager</code></li><li><code>@functools.lru_cache</code></li><li><code>@abc.abstractmethod</code></li></ul><p>Подробнее тут.<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup></p><h2 id=примеры-декораторов-код class=headerLink><a href=#%d0%bf%d1%80%d0%b8%d0%bc%d0%b5%d1%80%d1%8b-%d0%b4%d0%b5%d0%ba%d0%be%d1%80%d0%b0%d1%82%d0%be%d1%80%d0%be%d0%b2-%d0%ba%d0%be%d0%b4 class=header-mark></a>Примеры декораторов (код)</h2><h3 id=конвертер class=headerLink><a href=#%d0%ba%d0%be%d0%bd%d0%b2%d0%b5%d1%80%d1%82%d0%b5%d1%80 class=header-mark></a>Конвертер</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>functools</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>convert</span><span class=p>(</span><span class=n>func</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>convert_to</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;Этот код конвертирует единицы измерения из одного типа в другой.&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>func</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>functools</span><span class=o>.</span><span class=n>partial</span><span class=p>(</span><span class=n>convert</span><span class=p>,</span> <span class=n>convert_to</span><span class=o>=</span><span class=n>convert_to</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nd>@functools</span><span class=o>.</span><span class=n>wraps</span><span class=p>(</span><span class=n>func</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>wrapper</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Conversion unit: </span><span class=si>{</span><span class=n>convert_to</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>val</span> <span class=o>=</span> <span class=n>func</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=c1># Добавим правила для преобразования</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>convert_to</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>val</span>
</span></span><span class=line><span class=cl>        <span class=k>elif</span> <span class=n>convert_to</span> <span class=o>==</span> <span class=s2>&#34;km&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>val</span> <span class=o>/</span> <span class=mi>1000</span>
</span></span><span class=line><span class=cl>        <span class=k>elif</span> <span class=n>convert_to</span> <span class=o>==</span> <span class=s2>&#34;mile&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>val</span> <span class=o>*</span> <span class=mf>0.000621371</span>
</span></span><span class=line><span class=cl>        <span class=k>elif</span> <span class=n>convert_to</span> <span class=o>==</span> <span class=s2>&#34;cm&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>val</span> <span class=o>*</span> <span class=mi>100</span>
</span></span><span class=line><span class=cl>        <span class=k>elif</span> <span class=n>convert_to</span> <span class=o>==</span> <span class=s2>&#34;mm&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>val</span> <span class=o>*</span> <span class=mi>1000</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&#34;Conversion unit is not supported.&#34;</span><span class=p>)</span> <span class=c1># этот тип единиц не поддерживается</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>wrapper</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=таймер class=headerLink><a href=#%d1%82%d0%b0%d0%b9%d0%bc%d0%b5%d1%80 class=header-mark></a>Таймер</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>exec_time</span><span class=p>(</span><span class=nb>type</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&#34;sec&#34;</span><span class=p>,</span> <span class=n>iters</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>1</span><span class=p>):</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>exec_time_decorator</span><span class=p>(</span><span class=n>func</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nd>@wraps</span><span class=p>(</span><span class=n>func</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>def</span> <span class=nf>wrapper</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;&#34;&#34;Docstring wrapper&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>            <span class=n>start_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>iters</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                <span class=n>result</span> <span class=o>=</span> <span class=n>func</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>end_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=nb>type</span> <span class=o>==</span> <span class=s2>&#34;ms&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Execution time of </span><span class=si>{</span><span class=n>func</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2> x</span><span class=si>{</span><span class=n>iters</span><span class=si>}</span><span class=s2> is </span><span class=si>{</span><span class=p>(</span><span class=n>end_time</span> <span class=o>-</span> <span class=n>start_time</span><span class=p>)</span><span class=o>*</span><span class=mi>1000</span><span class=si>}</span><span class=s2> ms&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Execution time of </span><span class=si>{</span><span class=n>func</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2> x</span><span class=si>{</span><span class=n>iters</span><span class=si>}</span><span class=s2> is </span><span class=si>{</span><span class=n>end_time</span> <span class=o>-</span> <span class=n>start_time</span><span class=si>}</span><span class=s2> s&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>result</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>wrapper</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>exec_time_decorator</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=счетчик-вызовов class=headerLink><a href=#%d1%81%d1%87%d0%b5%d1%82%d1%87%d0%b8%d0%ba-%d0%b2%d1%8b%d0%b7%d0%be%d0%b2%d0%be%d0%b2 class=header-mark></a>Счетчик вызовов</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>counter</span><span class=p>(</span><span class=n>func</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>count</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@wraps</span><span class=p>(</span><span class=n>func</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>wrapper</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Docstring wrapper&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>nonlocal</span> <span class=n>count</span>
</span></span><span class=line><span class=cl>        <span class=n>count</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=n>res</span> <span class=o>=</span> <span class=n>func</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>func</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2> была вызвана: </span><span class=si>{</span><span class=n>count</span><span class=si>}</span><span class=s2>x&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>res</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>wrapper</span>
</span></span></code></pre></td></tr></table></div></div><p>Источники<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup><sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup><sup id=fnref:5><a href=#fn:5 class=footnote-ref role=doc-noteref>5</a></sup><sup id=fnref:6><a href=#fn:6 class=footnote-ref role=doc-noteref>6</a></sup></p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://ru.wikipedia.org/wiki/%d0%94%d0%b5%d0%ba%d0%be%d1%80%d0%b0%d1%82%d0%be%d1%80_%28%d1%88%d0%b0%d0%b1%d0%bb%d0%be%d0%bd_%d0%bf%d1%80%d0%be%d0%b5%d0%ba%d1%82%d0%b8%d1%80%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d1%8f%29 target=_blank rel="noopener noreffer">Wikipedia - Шаблон проектирования Декоратор</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p><a href=https://github.com/lord63/awesome-python-decorator target=_blank rel="noopener noreffer">Awesome Python Decorator</a>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p><a href=https://tproger.ru/translations/demystifying-decorators-in-python/ target=_blank rel="noopener noreffer">Декораторы в Python: понять и полюбить</a>&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4><p><a href=https://habr.com/ru/post/141501/ target=_blank rel="noopener noreffer">Понимаем декораторы в Python&rsquo;e, шаг за шагом. Шаг 2</a>&#160;<a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:5><p><a href=https://pythonru.com/osnovy/rukovodstvo-po-dekoratoram-python target=_blank rel="noopener noreffer">Руководство по декораторам Python</a>&#160;<a href=#fnref:5 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:6><p><a href=https://www.awesomeandrew.ru/2020/06/02/%d1%80%d0%b0%d0%b7%d0%b1%d0%b8%d1%80%d0%b0%d0%b5%d0%bc%d1%81%d1%8f-%d1%81-%d0%b4%d0%b5%d0%ba%d0%be%d1%80%d0%b0%d1%82%d0%be%d1%80%d0%b0%d0%bc%d0%b8-%d0%b2-python/ target=_blank rel="noopener noreffer">Разбираемся с декораторами в Python</a>&#160;<a href=#fnref:6 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Oбновлено 05.05.2022</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=# onclick=return!1 title="Поделиться Twitter" data-sharer=twitter data-url=https://baikov.dev/decorators-in-python/ data-title="Декораторы в Python: определение, особенности, примеры декораторов" data-hashtags=python><i class="fab fa-twitter fa-fw"></i></a><a href=# onclick=return!1 title="Поделиться Facebook" data-sharer=facebook data-url=https://baikov.dev/decorators-in-python/ data-hashtag=python><i class="fab fa-facebook-square fa-fw"></i></a><a href=# onclick=return!1 title="Поделиться Linkedin" data-sharer=linkedin data-url=https://baikov.dev/decorators-in-python/><i class="fab fa-linkedin fa-fw"></i></a><a href=# onclick=return!1 title="Поделиться WhatsApp" data-sharer=whatsapp data-url=https://baikov.dev/decorators-in-python/ data-title="Декораторы в Python: определение, особенности, примеры декораторов" data-web><i class="fab fa-whatsapp fa-fw"></i></a><a href=# onclick=return!1 title="Поделиться VK" data-sharer=vk data-url=https://baikov.dev/decorators-in-python/ data-title="Декораторы в Python: определение, особенности, примеры декораторов" data-caption="Декораторы позволяют менять поведение функции не изменяя ее кода. Это становится возможным благодаря тому, что функции в Python могут принимать и возвращать функции. Декоратор в Python - это реализация структурного шаблона проектирования «Декоратор»."><i class="fab fa-vk fa-fw"></i></a><a href=# onclick=return!1 title="Поделиться Telegram" data-sharer=telegram data-url=https://baikov.dev/decorators-in-python/ data-title="Декораторы в Python: определение, особенности, примеры декораторов" data-web><i class="fab fa-telegram-plane fa-fw"></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/python/>Python</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Назад</a></span>&nbsp;|&nbsp;<span><a href=/>Главная</a></span></section></div><div class=post-nav><a href=/coroutines-in-python/ class=prev rel=prev title="Сопрограммы (corutines) в Python"><i class="fas fa-angle-left fa-fw"></i>Сопрограммы (corutines) в Python</a>
<a href=/yandex-praktikum-reviewer-test-task/ class=next rel=next title="Тестовое задание на вакансию Код-ревьюера в Яндекс.Практикум">Тестовое задание на вакансию Код-ревьюера в Яндекс.Практикум<i class="fas fa-angle-right fa-fw"></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2019 - 2022</span></div><div class=footer-line></div><div class=footer-line></div></div></footer></div><div id=fixed-buttons><a href=#back-to-top id=back-to-top-button class=fixed-button title=Наверх><i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title="Посмотреть комментарии"><i class="fas fa-comment fa-fw"></i></a></div><div class=assets><script type=text/javascript src="https://polyfill.io/v3/polyfill.min.js?features=Array.prototype.fill%2CArray.prototype.find%2CArray.from%2CIntersectionObserver%2CMath.sign%2CObject.assign%2CPromise%2CObject.entries%2Chtml5shiv%2CObject.values%2Cfetch%2CElement.prototype.after"></script><script type=text/javascript src=/lib/autocomplete/autocomplete.min.js></script><script type=text/javascript src=/lib/fuse/fuse.min.js></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=/lib/topbar/topbar.min.js></script><script type=text/javascript src=/lib/pjax/pjax.min.js></script><script type=text/javascript src=/js/theme.min.js defer></script></div><div class=pjax-assets><script type=text/javascript>window.config={code:{copyTitle:"Копировать в буфер обмена",maxShownLines:20},comment:{},search:{distance:100,findAllMatches:!1,fuseIndexURL:"/index.json",highlightTag:"em",ignoreFieldNorm:!1,ignoreLocation:!0,isCaseSensitive:!1,location:0,maxResultLength:10,minMatchCharLength:3,noResultsFound:"Результатов не найдено",snippetLength:300,threshold:.1,type:"fuse",useExtendedSearch:!1},sharerjs:!0}</script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/sharer/sharer.min.js></script><script type=text/javascript src=/js/custom.js></script></div></body></html>